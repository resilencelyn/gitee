(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[7905],{1145:function(pn,_,p){"use strict";p.r(_),p.d(_,{default:function(){return hn}});var gn=p(57663),De=p(71577),ee=p(3182),yn=p(34792),Ee=p(48086),xn=p(71194),be=p(50146),Se=p(2824),Ze=p(94043),M=p.n(Ze),ne=p(68489),Te=p(57119),Pe=p(49101),Le=p(70844),Oe=p(16894),je=p(93279),te=p(77613),P=p(67294),w=p(93224),k=p(11849),$e=p(90672),A=p(15196),Ie=p(71975),re=p(5966),Fe=p(64284),Me=p(52125),we=p(57551),T=p(32059),B=p(69610),U=p(54941),S=p(3372),W=p(43028),z=p(5869),Ae=p(94184),L=p.n(Ae),R=p(45598),oe=P.createContext(null),Re=p(45916),N=p(85893),ae="open",se="close",He="---",Ge=function(c){(0,W.Z)(u,c);var d=(0,z.Z)(u);function u(){var e;(0,B.Z)(this,u);for(var a=arguments.length,v=new Array(a),s=0;s<a;s++)v[s]=arguments[s];return e=d.call.apply(d,[this].concat(v)),e.state={dragNodeHighlight:!1},e.selectHandle=void 0,e.onSelectorClick=function(n){var t=e.props.context.onNodeClick;t(n,(0,S.Z)(e)),e.isSelectable()?e.onSelect(n):e.onCheck(n)},e.onSelectorDoubleClick=function(n){var t=e.props.context.onNodeDoubleClick;t(n,(0,S.Z)(e))},e.onSelect=function(n){if(!e.isDisabled()){var t=e.props.context.onNodeSelect;n.preventDefault(),t(n,(0,S.Z)(e))}},e.onCheck=function(n){if(!e.isDisabled()){var t=e.props,r=t.disableCheckbox,l=t.checked,o=e.props.context.onNodeCheck;if(!(!e.isCheckable()||r)){n.preventDefault();var f=!l;o(n,(0,S.Z)(e),f)}}},e.onMouseEnter=function(n){var t=e.props.context.onNodeMouseEnter;t(n,(0,S.Z)(e))},e.onMouseLeave=function(n){var t=e.props.context.onNodeMouseLeave;t(n,(0,S.Z)(e))},e.onContextMenu=function(n){var t=e.props.context.onNodeContextMenu;t(n,(0,S.Z)(e))},e.onDragStart=function(n){var t=e.props.context.onNodeDragStart;n.stopPropagation(),e.setState({dragNodeHighlight:!0}),t(n,(0,S.Z)(e));try{n.dataTransfer.setData("text/plain","")}catch(r){}},e.onDragEnter=function(n){var t=e.props.context.onNodeDragEnter;n.preventDefault(),n.stopPropagation(),t(n,(0,S.Z)(e))},e.onDragOver=function(n){var t=e.props.context.onNodeDragOver;n.preventDefault(),n.stopPropagation(),t(n,(0,S.Z)(e))},e.onDragLeave=function(n){var t=e.props.context.onNodeDragLeave;n.stopPropagation(),t(n,(0,S.Z)(e))},e.onDragEnd=function(n){var t=e.props.context.onNodeDragEnd;n.stopPropagation(),e.setState({dragNodeHighlight:!1}),t(n,(0,S.Z)(e))},e.onDrop=function(n){var t=e.props.context.onNodeDrop;n.preventDefault(),n.stopPropagation(),e.setState({dragNodeHighlight:!1}),t(n,(0,S.Z)(e))},e.onExpand=function(n){var t=e.props.context.onNodeExpand;t(n,(0,S.Z)(e))},e.setSelectHandle=function(n){e.selectHandle=n},e.getNodeChildren=function(){var n=e.props.children,t=(0,R.Z)(n).filter(function(l){return l}),r=le(t);return t.length!==r.length&&ie(),r},e.getNodeState=function(){var n=e.props.expanded;return e.isLeaf()?null:n?ae:se},e.isLeaf=function(){var n=e.props,t=n.isLeaf,r=n.loaded,l=e.props.context.loadData,o=e.getNodeChildren().length!==0;return t===!1?!1:t||!l&&!o||l&&r&&!o},e.isDisabled=function(){var n=e.props.disabled,t=e.props.context.disabled;return n===!1?!1:!!(t||n)},e.isCheckable=function(){var n=e.props.checkable,t=e.props.context.checkable;return!t||n===!1?!1:t},e.syncLoadData=function(n){var t=n.expanded,r=n.loading,l=n.loaded,o=e.props.context,f=o.loadData,h=o.onNodeLoad;if(!r&&f&&t&&!e.isLeaf()){var i=e.getNodeChildren().length!==0;!i&&!l&&h((0,S.Z)(e))}},e.renderSwitcher=function(){var n=e.props,t=n.expanded,r=n.switcherIcon,l=e.props.context,o=l.prefixCls,f=l.switcherIcon,h=r||f;if(e.isLeaf())return(0,N.jsx)("span",{className:L()("".concat(o,"-switcher"),"".concat(o,"-switcher-noop")),children:typeof h=="function"?h((0,k.Z)((0,k.Z)({},e.props),{},{isLeaf:!0})):h});var i=L()("".concat(o,"-switcher"),"".concat(o,"-switcher_").concat(t?ae:se));return(0,N.jsx)("span",{onClick:e.onExpand,className:i,children:typeof h=="function"?h((0,k.Z)((0,k.Z)({},e.props),{},{isLeaf:!1})):h})},e.renderCheckbox=function(){var n=e.props,t=n.checked,r=n.halfChecked,l=n.disableCheckbox,o=e.props.context.prefixCls,f=e.isDisabled(),h=e.isCheckable();if(!h)return null;var i=typeof h!="boolean"?h:null;return(0,N.jsx)("span",{className:L()("".concat(o,"-checkbox"),t&&"".concat(o,"-checkbox-checked"),!t&&r&&"".concat(o,"-checkbox-indeterminate"),(f||l)&&"".concat(o,"-checkbox-disabled")),onClick:e.onCheck,children:i})},e.renderIcon=function(){var n=e.props.loading,t=e.props.context.prefixCls;return(0,N.jsx)("span",{className:L()("".concat(t,"-iconEle"),"".concat(t,"-icon__").concat(e.getNodeState()||"docu"),n&&"".concat(t,"-icon_loading"))})},e.renderSelector=function(){var n=e.state.dragNodeHighlight,t=e.props,r=t.title,l=t.selected,o=t.icon,f=t.loading,h=e.props.context,i=h.prefixCls,C=h.showIcon,y=h.icon,x=h.draggable,m=h.loadData,g=e.isDisabled(),K="".concat(i,"-node-content-wrapper"),D;if(C){var b=o||y;D=b?(0,N.jsx)("span",{className:L()("".concat(i,"-iconEle"),"".concat(i,"-icon__customize")),children:typeof b=="function"?b(e.props):b}):e.renderIcon()}else m&&f&&(D=e.renderIcon());var Z=(0,N.jsx)("span",{className:"".concat(i,"-title"),children:r});return(0,N.jsxs)("span",{ref:e.setSelectHandle,title:typeof r=="string"?r:"",className:L()("".concat(K),"".concat(K,"-").concat(e.getNodeState()||"normal"),!g&&(l||n)&&"".concat(i,"-node-selected"),!g&&x&&"draggable"),draggable:!g&&x||void 0,"aria-grabbed":!g&&x||void 0,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onContextMenu:e.onContextMenu,onClick:e.onSelectorClick,onDoubleClick:e.onSelectorDoubleClick,onDragStart:x?e.onDragStart:void 0,children:[D,Z]})},e.renderChildren=function(){var n=e.props,t=n.expanded,r=n.pos,l=e.props.context,o=l.prefixCls,f=l.motion,h=l.renderTreeNode,i=e.getNodeChildren();if(i.length===0)return null;var C=!0;return i.forEach(function(y){y.props.children.length>0&&(C=!1)}),(0,N.jsx)(Re.ZP,(0,k.Z)((0,k.Z)({visible:t},f),{},{children:function(x){var m=x.style,g=x.className;return(0,N.jsx)("ul",{className:L()(g,"".concat(o,"-child-tree"),t&&"".concat(o,"-child-tree-open")),style:(0,k.Z)((0,k.Z)({},m),{},{display:C?"flex":""}),"data-expanded":t,role:"group",children:fe(i,function(K,D){return h(K,D,r)})})}}))},e}return(0,U.Z)(u,[{key:"componentDidMount",value:function(){var a=this.props,v=a.eventKey,s=a.context.registerTreeNode;this.syncLoadData(this.props),s(v,this)}},{key:"componentDidUpdate",value:function(){this.syncLoadData(this.props)}},{key:"componentWillUnmount",value:function(){var a=this.props,v=a.eventKey,s=a.context.registerTreeNode;s(v,null)}},{key:"isSelectable",value:function(){var a=this.props.selectable,v=this.props.context.selectable;return typeof a=="boolean"?a:v}},{key:"render",value:function(){var a,v=this.props.loading,s=this.props,n=s.className,t=s.style,r=s.dragOver,l=s.dragOverGapTop,o=s.dragOverGapBottom,f=s.isLeaf,h=s.expanded,i=s.selected,C=s.checked,y=s.halfChecked,x=(0,w.Z)(s,["className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","expanded","selected","checked","halfChecked"]),m=this.props.context,g=m.prefixCls,K=m.filterTreeNode,D=m.draggable,b=this.isDisabled(),Z=Ne(x);return(0,N.jsxs)("li",(0,k.Z)((0,k.Z)({className:L()(n,(a={},(0,T.Z)(a,"".concat(g,"-treenode-disabled"),b),(0,T.Z)(a,"".concat(g,"-treenode-switcher-").concat(h?"open":"close"),!f),(0,T.Z)(a,"".concat(g,"-treenode-checkbox-checked"),C),(0,T.Z)(a,"".concat(g,"-treenode-checkbox-indeterminate"),y),(0,T.Z)(a,"".concat(g,"-treenode-selected"),i),(0,T.Z)(a,"".concat(g,"-treenode-loading"),v),(0,T.Z)(a,"drag-over",!b&&r),(0,T.Z)(a,"drag-over-gap-top",!b&&l),(0,T.Z)(a,"drag-over-gap-bottom",!b&&o),(0,T.Z)(a,"filter-node",K&&K(this)),a)),style:t,role:"treeitem",onDragEnter:D?this.onDragEnter:void 0,onDragOver:D?this.onDragOver:void 0,onDragLeave:D?this.onDragLeave:void 0,onDrop:D?this.onDrop:void 0,onDragEnd:D?this.onDragEnd:void 0},Z),{},{children:[this.renderSwitcher(),this.renderCheckbox(),this.renderSelector(),this.renderChildren()]}))}}]),u}(P.Component),Y=function(d){return(0,N.jsx)(oe.Consumer,{children:function(e){return(0,N.jsx)(Ge,(0,k.Z)((0,k.Z)({},d),{},{context:e}))}})};Y.defaultProps={title:He},Y.isTreeNode=1;var V=Y,Be=.25,Ue=2,de=!1;function ie(){de||(de=!0)}function j(c,d){var u=c.slice(),e=u.indexOf(d);return e>=0&&u.splice(e,1),u}function $(c,d){var u=c.slice();return u.indexOf(d)===-1&&u.push(d),u}function We(c){return c.split("-")}function ce(c,d){return"".concat(c,"-").concat(d)}function ze(c){return c&&c.type&&c.type.isTreeNode}function le(c){return(0,R.Z)(c).filter(ze)}function I(c){var d=c.props||{},u=d.disabled,e=d.disableCheckbox,a=d.checkable;return!!(u||e)||a===!1}function ue(c,d){function u(e,a,v){var s=e?e.props.children:c,n=e?ce(v.pos,a):0,t=le(s);if(e){var r={node:e,index:a,pos:n,key:e.key||n,parentPos:v.node?v.pos:null};d(r)}P.Children.forEach(t,function(l,o){u(l,o,{node:e,pos:n})})}u(null)}function fe(c,d){var u=(0,R.Z)(c).map(d);return u.length===1?u[0]:u}function Ye(c,d){var u=d.props,e=u.eventKey,a=u.pos,v=[];return ue(c,function(s){var n=s.key;v.push(n)}),v.push(e||a),v}function he(c,d){var u=c.clientY,e=d.selectHandle.getBoundingClientRect(),a=e.top,v=e.bottom,s=e.height,n=Math.max(s*Be,Ue);return u<=a+n?-1:u>=v-n?1:0}function ve(c,d){if(!!c){var u=d.multiple;return u?c.slice():c.length?[c[0]]:c}}function pe(c){return c&&c.map(function(d){return String(d)})}var Ve=function(d){return d};function ge(c,d){if(!c)return[];var u=d||{},e=u.processProps,a=e===void 0?Ve:e,v=Array.isArray(c)?c:[c];return v.map(function(s){var n=s.children,t=(0,w.Z)(s,["children"]),r=ge(n,d);return(0,N.jsx)(V,(0,k.Z)((0,k.Z)({},a(t)),{},{children:r}))})}function Je(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=d.initWrapper,e=d.processEntity,a=d.onProcessFinished,v={},s={},n={posEntities:v,keyEntities:s};return u&&(n=u(n)||n),ue(c,function(t){var r=t.node,l=t.index,o=t.pos,f=t.key,h=t.parentPos,i={node:r,index:l,key:f,pos:o};v[o]=i,s[f]=i,i.parent=v[h],i.parent&&(i.parent.children=i.parent.children||[],i.parent.children.push(i)),e&&e(i,n)}),a&&a(n),n}function J(c){if(!c)return null;var d;if(Array.isArray(c))d={checkedKeys:c,halfCheckedKeys:void 0};else if(typeof c=="object")d={checkedKeys:c.checked||void 0,halfCheckedKeys:c.halfChecked||void 0};else return null;return d.checkedKeys=pe(d.checkedKeys),d.halfCheckedKeys=pe(d.halfCheckedKeys),d}function ye(c,d,u){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a={},v={};(e.checkedKeys||[]).forEach(function(o){a[o]=!0}),(e.halfCheckedKeys||[]).forEach(function(o){v[o]=!0});function s(o){if(a[o]!==d){var f=u[o];if(!!f){var h=f.children,i=f.parent,C=f.node;if(!I(C)){var y=!0,x=!1;(h||[]).filter(function(m){return!I(m.node)}).forEach(function(m){var g=m.key,K=a[g],D=v[g];(K||D)&&(x=!0),K||(y=!1)}),d?a[o]=y:a[o]=!1,v[o]=x,i&&s(i.key)}}}}function n(o){if(a[o]!==d){var f=u[o];if(!!f){var h=f.children,i=f.node;I(i)||(a[o]=d,(h||[]).forEach(function(C){n(C.key)}))}}}function t(o){var f=u[o];if(!!f){var h=f.children,i=f.parent,C=f.node;a[o]=d,!I(C)&&((h||[]).filter(function(y){return!I(y.node)}).forEach(function(y){n(y.key)}),i&&s(i.key))}}(c||[]).forEach(function(o){t(o)});var r=[],l=[];return Object.keys(a).forEach(function(o){a[o]&&r.push(o)}),Object.keys(v).forEach(function(o){!a[o]&&v[o]&&l.push(o)}),{checkedKeys:r,halfCheckedKeys:l}}function xe(c,d){var u={};function e(a){if(!u[a]){var v=d[a];if(!!v){u[a]=!0;var s=v.parent,n=v.node;I(n)||s&&e(s.key)}}}return(c||[]).forEach(function(a){e(a)}),Object.keys(u)}function Ne(c){return Object.keys(c).reduce(function(d,u){return(u.substr(0,5)==="data-"||u.substr(0,5)==="aria-")&&(d[u]=c[u]),d},{})}var Ce=function(c){(0,W.Z)(u,c);var d=(0,z.Z)(u);function u(){var e;(0,B.Z)(this,u);for(var a=arguments.length,v=new Array(a),s=0;s<a;s++)v[s]=arguments[s];return e=d.call.apply(d,[this].concat(v)),e.domTreeNodes={},e.delayedDragEnterLogic=void 0,e.state={keyEntities:{},selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],dragNodesKeys:[],dragOverNodeKey:null,dropPosition:null,treeNode:[],prevProps:null},e.dragNode=void 0,e.onNodeDragStart=function(n,t){var r=e.state.expandedKeys,l=e.props.onDragStart,o=t.props,f=o.eventKey,h=o.children;e.dragNode=t,e.setState({dragNodesKeys:Ye(h,t),expandedKeys:j(r,f)}),l&&l({event:n,node:t})},e.onNodeDragEnter=function(n,t){var r=e.state.expandedKeys,l=e.props.onDragEnter,o=t.props,f=o.pos,h=o.eventKey;if(!!e.dragNode){var i=he(n,t);if(e.dragNode.props.eventKey===h&&i===0){e.setState({dragOverNodeKey:"",dropPosition:null});return}setTimeout(function(){e.setState({dragOverNodeKey:h,dropPosition:i}),e.delayedDragEnterLogic||(e.delayedDragEnterLogic={}),Object.keys(e.delayedDragEnterLogic).forEach(function(C){clearTimeout(e.delayedDragEnterLogic[C])}),e.delayedDragEnterLogic[f]=window.setTimeout(function(){var C=$(r,h);"expandedKeys"in e.props||e.setState({expandedKeys:C}),l&&l({event:n,node:t,expandedKeys:C})},400)},0)}},e.onNodeDragOver=function(n,t){var r=e.props.onDragOver,l=t.props.eventKey;if(e.dragNode&&l===e.state.dragOverNodeKey){var o=he(n,t);if(o===e.state.dropPosition)return;e.setState({dropPosition:o})}r&&r({event:n,node:t})},e.onNodeDragLeave=function(n,t){var r=e.props.onDragLeave;e.setState({dragOverNodeKey:""}),r&&r({event:n,node:t})},e.onNodeDragEnd=function(n,t){var r=e.props.onDragEnd;e.setState({dragOverNodeKey:""}),r&&r({event:n,node:t}),e.dragNode=null},e.onNodeDrop=function(n,t){var r=e.state,l=r.dragNodesKeys,o=l===void 0?[]:l,f=r.dropPosition,h=e.props.onDrop,i=t.props,C=i.eventKey,y=i.pos;if(e.setState({dragOverNodeKey:""}),o.indexOf(C)===-1){var x=We(y),m={event:n,node:t,dragNode:e.dragNode,dragNodesKeys:o.slice(),dropPosition:f+Number(x[x.length-1]),dropToGap:!1};f!==0&&(m.dropToGap=!0),h&&h(m),e.dragNode=null}},e.onNodeClick=function(n,t){var r=e.props.onClick;r&&r(n,t)},e.onNodeDoubleClick=function(n,t){var r=e.props.onDoubleClick;r&&r(n,t)},e.onNodeSelect=function(n,t){var r=e.state.selectedKeys,l=e.state.keyEntities,o=e.props,f=o.onSelect,h=o.multiple,i=t.props,C=i.selected,y=i.eventKey,x=!C;x?h?r=$(r,y):r=[y]:r=j(r,y);var m=r.map(function(g){var K=l[g];return K?K.node:null}).filter(function(g){return g});e.setUncontrolledState({selectedKeys:r}),f&&f(r,{event:"select",selected:x,node:t,selectedNodes:m,nativeEvent:n.nativeEvent})},e.onNodeCheck=function(n,t,r){var l=e.state,o=l.keyEntities,f=l.checkedKeys,h=l.halfCheckedKeys,i=e.props,C=i.checkStrictly,y=i.onCheck,x=t.props.eventKey,m,g={event:"check",node:t,checked:r,nativeEvent:n.nativeEvent};if(C){var K=r?$(f,x):j(f,x),D=j(h,x);m={checked:K,halfChecked:D},g.checkedNodes=K.map(function(E){return o[E]}).filter(function(E){return E}).map(function(E){return E.node}),e.setUncontrolledState({checkedKeys:K})}else{var b=ye([x],r,o,{checkedKeys:f,halfCheckedKeys:h}),Z=b.checkedKeys,O=b.halfCheckedKeys;m=Z,g.checkedNodes=[],g.checkedNodesPositions=[],g.halfCheckedKeys=O,Z.forEach(function(E){var F=o[E];if(!!F){var G=F.node,vn=F.pos;g.checkedNodes.push(G),g.checkedNodesPositions.push({node:G,pos:vn})}}),e.setUncontrolledState({checkedKeys:Z,halfCheckedKeys:O})}y&&y(m,g)},e.onNodeLoad=function(n){return new Promise(function(t){e.setState(function(r){var l=r.loadedKeys,o=l===void 0?[]:l,f=r.loadingKeys,h=f===void 0?[]:f,i=e.props,C=i.loadData,y=i.onLoad,x=n.props.eventKey;if(!C||o.indexOf(x)!==-1||h.indexOf(x)!==-1)return{};var m=C(n);return m.then(function(){var g=e.state,K=g.loadedKeys,D=g.loadingKeys,b=$(K,x),Z=j(D,x);y&&y(b,{event:"load",node:n}),e.setUncontrolledState({loadedKeys:b}),e.setState({loadingKeys:Z}),t()}),{loadingKeys:$(h,x)}})})},e.onNodeExpand=function(n,t){var r=e.state.expandedKeys,l=e.props,o=l.onExpand,f=l.loadData,h=t.props,i=h.eventKey,C=h.expanded,y=r.indexOf(i),x=!C;if(x?r=$(r,i):r=j(r,i),e.setUncontrolledState({expandedKeys:r}),o&&o(r,{node:t,expanded:x,nativeEvent:n.nativeEvent}),x&&f){var m=e.onNodeLoad(t);return m?m.then(function(){e.setUncontrolledState({expandedKeys:r})}):null}return null},e.onNodeMouseEnter=function(n,t){var r=e.props.onMouseEnter;r&&r({event:n,node:t})},e.onNodeMouseLeave=function(n,t){var r=e.props.onMouseLeave;r&&r({event:n,node:t})},e.onNodeContextMenu=function(n,t){var r=e.props.onRightClick;r&&(n.preventDefault(),r({event:n,node:t}))},e.setUncontrolledState=function(n){var t=!1,r={};Object.keys(n).forEach(function(l){l in e.props||(t=!0,r[l]=n[l])}),t&&e.setState(r)},e.registerTreeNode=function(n,t){t?e.domTreeNodes[n]=t:delete e.domTreeNodes[n]},e.isKeyChecked=function(n){var t=e.state.checkedKeys,r=t===void 0?[]:t;return r.indexOf(n)!==-1},e.renderTreeNode=function(n,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=e.state,o=l.keyEntities,f=l.expandedKeys,h=f===void 0?[]:f,i=l.selectedKeys,C=i===void 0?[]:i,y=l.halfCheckedKeys,x=y===void 0?[]:y,m=l.loadedKeys,g=m===void 0?[]:m,K=l.loadingKeys,D=K===void 0?[]:K,b=l.dragOverNodeKey,Z=l.dropPosition,O=ce(r,t),E=n.key||O;return o[E]?P.cloneElement(n,{key:E,eventKey:E,expanded:h.indexOf(E)!==-1,selected:C.indexOf(E)!==-1,loaded:g.indexOf(E)!==-1,loading:D.indexOf(E)!==-1,checked:e.isKeyChecked(E),halfChecked:x.indexOf(E)!==-1,pos:O,dragOver:b===E&&Z===0,dragOverGapTop:b===E&&Z===-1,dragOverGapBottom:b===E&&Z===1}):(ie(),null)},e}return(0,U.Z)(u,[{key:"render",value:function(){var a=this,v=this.state.treeNode,s=this.props,n=s.prefixCls,t=s.className,r=s.focusable,l=s.style,o=s.showLine,f=s.tabIndex,h=f===void 0?0:f,i=s.selectable,C=s.showIcon,y=s.icon,x=s.switcherIcon,m=s.draggable,g=s.checkable,K=s.checkStrictly,D=s.disabled,b=s.motion,Z=s.loadData,O=s.filterTreeNode,E=Ne(this.props);return r&&(E.tabIndex=h),(0,N.jsx)(oe.Provider,{value:{prefixCls:n,selectable:i,showIcon:C,icon:y,switcherIcon:x,draggable:m,checkable:g,checkStrictly:K,disabled:D,motion:b,loadData:Z,filterTreeNode:O,renderTreeNode:this.renderTreeNode,isKeyChecked:this.isKeyChecked,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop,registerTreeNode:this.registerTreeNode},children:(0,N.jsx)("ul",(0,k.Z)((0,k.Z)({},E),{},{className:L()(n,t,(0,T.Z)({},"".concat(n,"-show-line"),o)),style:l,role:"tree",unselectable:"on",children:fe(v,function(F,G){return a.renderTreeNode(F,G)})}))})}}],[{key:"getDerivedStateFromProps",value:function(a,v){var s=v.prevProps,n={prevProps:a};function t(g){return!s&&g in a||s&&s[g]!==a[g]}var r=null;if(t("treeData")?r=ge(a.treeData):t("children")&&(r=(0,R.Z)(a.children)),r){n.treeNode=r;var l=Je(r);n.keyEntities=l.keyEntities}var o=n.keyEntities||v.keyEntities;if(t("expandedKeys")||s&&t("autoExpandParent")?n.expandedKeys=a.autoExpandParent||!s&&a.defaultExpandParent?xe(a.expandedKeys,o):a.expandedKeys:!s&&a.defaultExpandAll?n.expandedKeys=Object.keys(o):!s&&a.defaultExpandedKeys&&(n.expandedKeys=a.autoExpandParent||a.defaultExpandParent?xe(a.defaultExpandedKeys,o):a.defaultExpandedKeys),a.selectable&&(t("selectedKeys")?n.selectedKeys=ve(a.selectedKeys,a):!s&&a.defaultSelectedKeys&&(n.selectedKeys=ve(a.defaultSelectedKeys,a))),a.checkable){var f;if(t("checkedKeys")?f=J(a.checkedKeys)||{}:!s&&a.defaultCheckedKeys?f=J(a.defaultCheckedKeys)||{}:r&&(f=J(a.checkedKeys)||{checkedKeys:v.checkedKeys,halfCheckedKeys:v.halfCheckedKeys}),f){var h=f,i=h.checkedKeys,C=i===void 0?[]:i,y=h.halfCheckedKeys,x=y===void 0?[]:y;if(!a.checkStrictly){var m=ye(C,!0,o);C=m.checkedKeys,x=m.halfCheckedKeys}n.checkedKeys=C,n.halfCheckedKeys=x}}return t("loadedKeys")&&(n.loadedKeys=a.loadedKeys),n}}]),u}(P.Component);Ce.defaultProps={prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[]};var Qe=Ce,me=Qe;me.TreeNode=V;var Xe=me,Q=function(){return{height:0,opacity:0}},ke=function(d){return{height:d.scrollHeight,opacity:1}},qe=function(d){return{height:d.offsetHeight}},_e={motionName:"ant-motion-collapse",onAppearStart:Q,onEnterStart:Q,onAppearActive:ke,onEnterActive:ke,onLeaveStart:qe,onLeaveActive:Q},en=_e,Ke=p(16165),nn=p(46133),tn=p.n(nn),rn=p(3361),on=p.n(rn),an=p(31929),X=p(86582),sn=function(d){var u=d.value,e=u===void 0?[]:u,a=d.flatTreeData,v=d.onChange,s=d.readonly,n=(0,w.Z)(d,["value","flatTreeData","onChange","readonly"]);return(0,N.jsx)(q,(0,k.Z)({checkable:!0,showIcon:!0,defaultCheckedKeys:e,checkedKeys:e,checkStrictly:!0,defaultExpandAll:!0,onCheck:function(r,l){var o=r.checked,f=l.node.props.eventKey;if(!(!f||!v||s)){var h=(a==null?void 0:a.filter(function(i){return i.key.startsWith(f)}).map(function(i){return i.key}))||[];if(l.checked){v((0,X.Z)(new Set([].concat((0,X.Z)(o),(0,X.Z)(h)))));return}if(!l.checked){v(o.filter(function(i){return!h.includes(i)}));return}}}},n))},q=function(c){(0,W.Z)(u,c);var d=(0,z.Z)(u);function u(){var e;(0,B.Z)(this,u);for(var a=arguments.length,v=new Array(a),s=0;s<a;s++)v[s]=arguments[s];return e=d.call.apply(d,[this].concat(v)),e.tree=void 0,e.renderSwitcherIcon=function(n,t,r){var l=r.isLeaf,o=r.expanded,f=r.loading,h=e.props.showLine;if(f)return(0,N.jsx)(Ke.Z,{type:"loading",className:"".concat(n,"-switcher-loading-icon")});if(l)return h?(0,N.jsx)(Ke.Z,{type:"file",className:"".concat(n,"-switcher-line-icon")}):null;var i="".concat(n,"-switcher-icon");return t?P.cloneElement(t,{className:L()(t.props.className||"",i)}):o?(0,N.jsx)(tn(),{className:i}):(0,N.jsx)(on(),{className:i})},e.setTreeRef=function(n){e.tree=n},e.renderTree=function(n){var t,r=n.getPrefixCls,l=(0,S.Z)(e),o=l.props,f=o.prefixCls,h=o.className,i=o.showIcon,C=o.switcherIcon,y=o.blockNode,x=o.children,m=o.checkable,g="ant3-tree";return(0,N.jsx)(Xe,(0,k.Z)((0,k.Z)({ref:e.setTreeRef},o),{},{prefixCls:g,className:L()(h,(t={},(0,T.Z)(t,"".concat(g,"-icon-hide"),!i),(0,T.Z)(t,"".concat(g,"-block-node"),y),t)),checkable:m&&(0,N.jsx)("span",{className:"".concat(g,"-checkbox-inner")}),switcherIcon:function(D){return e.renderSwitcherIcon(g,C,D)},children:x}))},e}return(0,U.Z)(u,[{key:"render",value:function(){return(0,N.jsx)(an.ConfigConsumer,{children:this.renderTree})}}]),u}(P.Component);q.TreeNode=V,q.defaultProps={checkable:!1,showIcon:!1,motion:(0,k.Z)((0,k.Z)({},en),{},{motionAppear:!1}),blockNode:!1};function dn(c){for(var d=c.split(":"),u=[],e=0;e<d.length;e++)e>0?u.push("".concat(u[e-1],":").concat(d[e])):u.push(d[0]);return u}var H={list:"1",detail:"2",create:"3",update:"4",delete:"5",import:"6",export:"7"},cn=function c(d,u){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"parentKey",a=d.filter(function(s){return s[e]===u}),v=a.filter(function(s){return Object.keys(H).includes(s.key.toLowerCase().split(":").slice(-1)[0])}).length>0;return v&&a.sort(function(s,n){var t=H[s.key.toLowerCase().split(":").slice(-1)[0]]||s,r=H[n.key.toLowerCase().split(":").slice(-1)[0]]||n;return t>r?1:t<r?-1:0}),a.map(function(s){return(0,k.Z)((0,k.Z)({},s),{},{children:c(d,s.key)})})},ln=function(d){var u=d.treeData,e=d.flatTreeData,a=d.readonly,v=(0,w.Z)(d,["treeData","flatTreeData","readonly"]);return(0,N.jsx)(A.ZP.Item,(0,k.Z)((0,k.Z)({},v),{},{children:(0,N.jsx)(sn,(0,k.Z)({treeData:u,flatTreeData:e,readonly:a},d.fieldProps))}))},un=(0,te.P)(function(c){var d=c.onOk,u=c.onClose,e=c.role,a=c.readonly,v=(0,P.useRef)(),s=!!(e!=null&&e.id),n=(0,Fe.Z)(),t=(0,ne.m2)(),r=[];t.permissions.filter(function(o){return!o.code.startsWith("ROLE_")}).forEach(function(o){dn(o.code).forEach(function(f,h,i){var C=o.name||n.formatMessage({id:"authority.".concat(f.replaceAll(":",".")),defaultMessage:f});if(!r.find(function(x){return x.key===f})){var y=Object.keys(H).includes(f.toLowerCase().split(":").slice(-1)[0]);r.push({key:f,title:C,icon:y?(0,N.jsx)(Me.Z,{}):(0,N.jsx)(we.Z,{}),parentKey:i[h-1]})}})});var l=cn(r,void 0);return(0,N.jsxs)(Ie.Z,{title:s?e!=null&&e.id?"\u4FEE\u6539\u89D2\u8272":"\u65B0\u589E\u89D2\u8272":"\u67E5\u770B\u89D2\u8272",formRef:v,visible:!0,initialValues:e,submitter:{submitButtonProps:{style:{display:a?"none":"block"}}},drawerProps:{forceRender:!0,destroyOnClose:!0,onClose:function(){u()}},onFinish:function(){var o=(0,ee.Z)(M().mark(function f(h){var i;return M().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,t.saveOrUpdateRole((0,k.Z)((0,k.Z)({},e),h));case 2:i=y.sent,i.success&&d();case 4:case"end":return y.stop()}},f)}));return function(f){return o.apply(this,arguments)}}(),children:[(0,N.jsxs)(A.ZP.Group,{children:[(0,N.jsx)(re.Z,{name:"name",width:"md",label:"\u89D2\u8272\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",readonly:a,required:!0,rules:[{required:!0,message:"\u89D2\u8272\u540D\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,N.jsx)(re.Z,{width:"md",readonly:a,name:"code",label:"\u89D2\u8272\u7F16\u7801",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u7F16\u7801",rules:[{required:!0,message:"\u89D2\u8272\u7F16\u7801\u4E0D\u80FD\u4E3A\u7A7A"}],required:!0})]}),(0,N.jsx)(A.ZP.Group,{children:(0,N.jsx)($e.Z,{name:"remark",width:"xl",readonly:a,label:"\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u63CF\u8FF0\u4FE1\u606F"})}),(0,N.jsx)(A.ZP.Group,{children:(0,N.jsx)(ln,{name:"authorities",label:"\u89D2\u8272\u6388\u6743",treeData:l,flatTreeData:r})})]})}),fn=(0,te.P)(function(){var c=(0,ne.m2)(),d=(0,P.useRef)(),u=(0,P.useState)(),e=(0,Se.Z)(u,2),a=e[0],v=e[1];(0,P.useEffect)(function(){c.loadPermissions()},[c]);var s=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u89D2\u8272\u540D\u79F0",dataIndex:"name",ellipsis:!0},{title:"\u7F16\u7801",dataIndex:"code",hideInSearch:!0},{title:"\u63CF\u8FF0",dataIndex:"remark",search:!1},{title:"\u521B\u5EFA\u65F6\u95F4",key:"showTime",dataIndex:"createAt",valueType:"dateTime",hideInSearch:!0},{title:"\u64CD\u4F5C",valueType:"option",render:function(t,r){return[(0,N.jsx)("a",{onClick:function(){v({visible:!0,current:r,readonly:!0})},children:"\u8BE6\u60C5"},"readonly"),(0,N.jsx)(je.Z,{onSelect:function(o){o==="edit"&&v({current:r,visible:!0}),o==="delete"&&be.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u5F53\u524D\u89D2\u8272?",icon:(0,N.jsx)(Te.Z,{}),onOk:function(){c.deleteRole(r.id).then(function(h){if(h.success){var i;Ee.default.success("\u5220\u9664\u6210\u529F"),(i=d.current)===null||i===void 0||i.reload()}})}})},menus:[{key:"edit",name:"\u7F16\u8F91"},{key:"delete",name:"\u5220\u9664"}]},"actionGroup")]}}];return(0,N.jsxs)(Le.ZP,{title:!1,children:[(0,N.jsx)(Oe.ZP,{columns:s,actionRef:d,dataSource:c.roles,request:function(){var n=(0,ee.Z)(M().mark(function t(r){return M().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",c.loadRoles(r));case 1:case"end":return o.stop()}},t)}));return function(t){return n.apply(this,arguments)}}(),columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage"},rowKey:"id",search:{labelWidth:"auto"},pagination:{pageSize:5},dateFormatter:"string",headerTitle:"\u7CFB\u7EDF\u89D2\u8272\u5217\u8868",toolBarRender:function(){return[(0,N.jsx)(De.Z,{icon:(0,N.jsx)(Pe.Z,{}),type:"primary",onClick:function(){v({visible:!0})},children:"\u65B0\u5EFA"},"button")]}}),(a==null?void 0:a.visible)&&(0,N.jsx)(un,{onClose:function(){v(void 0)},readonly:a.readonly,onOk:function(){var t;v(void 0),(t=d.current)===null||t===void 0||t.reload()},role:a.current})]})}),hn=fn}}]);
