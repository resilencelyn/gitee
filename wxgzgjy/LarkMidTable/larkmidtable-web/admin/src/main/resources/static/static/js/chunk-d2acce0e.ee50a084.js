(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d2acce0e"],{"166d":function(t,a,e){},"8bb3":function(t,a,e){"use strict";e.d(a,"a",(function(){return l})),e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return i})),e.d(a,"e",(function(){return s})),e.d(a,"d",(function(){return o}));var r=e("b775");function l(t){return Object(r["a"])({url:"api/devSQL/add",method:"post",data:t})}function n(t){return Object(r["a"])({url:"/api/devSQL/update",method:"post",data:t})}function i(t){return Object(r["a"])({url:"/api/devTask/execute",method:"post",data:t})}function s(t){return Object(r["a"])({url:"/api/devTask/upload",method:"post",data:t})}function o(t){return t=Object.assign({type:"SQL"},t||{}),Object(r["a"])({url:"/api/devTask/list",method:"get",params:t})}},"993b":function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dev-sql"},[t.sqlDataList?e("div",{staticClass:"nav-bar"},[e("div",{staticClass:"search"},[e("el-input",{attrs:{size:"small","prefix-icon":"el-icon-search",placeholder:"请输入查询关键字"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleSearch(a)}},model:{value:t.searchInput,callback:function(a){t.searchInput=a},expression:"searchInput"}}),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:t.handleSearch}},[t._v(" 查询 ")])],1),e("ul",t._l(t.sqlDataList,(function(a,r){return e("li",{key:"sql-data-list-"+r,class:{"cur-li":t.curData&&t.curData.id===a.id},on:{click:function(e){return t.setCurData(a)}}},[e("span",{staticClass:"icon"},[t._v(t._s(a.tasktype))]),e("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(a.name))])])})),0)]):t._e(),e("div",{staticClass:"app-main"},[e("div",{staticClass:"buttons"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleAdd}},[t._v("新建")]),e("el-button",{attrs:{type:"primary",size:"small",disabled:!t.curData},on:{click:t.executeData}},[t._v("运行")]),e("el-button",{attrs:{type:"primary",size:"small",disabled:!t.curData},on:{click:function(){t.curData.sql_text=t.sqlText,t.updateData(t.curData)}}},[t._v(" 保存 ")])],1),t.curData?e("div",{staticClass:"editor"},[e("el-form",{ref:"infoDialogForm",attrs:{model:t.curData,rules:t.rules,size:"medium","label-width":"100px"}},[e("el-row",{attrs:{gutter:24}},[e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"任务名称",prop:"name"}},[e("el-input",{attrs:{clearable:!0,placeholder:"请输入"},model:{value:t.curData.name,callback:function(a){t.$set(t.curData,"name","string"===typeof a?a.trim():a)},expression:"curData.name"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"任务类型",prop:"tasktype"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.curData.tasktype,callback:function(a){t.$set(t.curData,"tasktype",a)},expression:"curData.tasktype"}},[e("el-option",{attrs:{label:"Flink",value:"Flink"}}),e("el-option",{attrs:{label:"Spark",value:"Spark"}})],1)],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"运行方式",prop:"runtype"}},[e("el-input",{attrs:{clearable:!0,placeholder:"请输入"},model:{value:t.curData.runtype,callback:function(a){t.$set(t.curData,"runtype","string"===typeof a?a.trim():a)},expression:"curData.runtype"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"运行参数",prop:"run_param"}},[e("el-input",{attrs:{clearable:!0,placeholder:"请输入"},model:{value:t.curData.run_param,callback:function(a){t.$set(t.curData,"run_param","string"===typeof a?a.trim():a)},expression:"curData.run_param"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"jar URI",prop:"jarpath"}},[e("span",{staticStyle:{display:"flex","align-items":"center"}},[e("el-input",{staticStyle:{"margin-right":"10px"},attrs:{clearable:!0,placeholder:"请输入"},model:{value:t.curData.jarpath,callback:function(a){t.$set(t.curData,"jarpath","string"===typeof a?a.trim():a)},expression:"curData.jarpath"}}),e("el-button",{attrs:{type:"primary"},on:{click:t.uploadData}},[t._v("上传")])],1)])],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"任务描述",prop:"task_describe"}},[e("el-input",{attrs:{clearable:!0,type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入"},model:{value:t.curData.task_describe,callback:function(a){t.$set(t.curData,"task_describe","string"===typeof a?a.trim():a)},expression:"curData.task_describe"}})],1)],1)],1)],1),e("div",{staticClass:"result",domProps:{innerHTML:t._s(t.jsonResult)}})],1):t._e()]),e("InfoDialog",{ref:"InfoDialog"})],1)},l=[],n=(e("b0c0"),e("e9c4"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-dialog",{ref:"InfoDialog",attrs:{visible:t.dialogShow,title:t.infoTitle,width:"600px","append-to-body":""},on:{"update:visible":function(a){t.dialogShow=a},close:t.close}},[e("el-form",{ref:"infoDialogForm",attrs:{model:t.formData,rules:t.rules,size:"medium","label-width":"100px"}},[e("el-row",{attrs:{gutter:24}},[e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"任务名称",prop:"name"}},[e("el-input",{attrs:{clearable:!0,placeholder:"请输入"},model:{value:t.formData.name,callback:function(a){t.$set(t.formData,"name","string"===typeof a?a.trim():a)},expression:"formData.name"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"任务类型",prop:"tasktype"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.formData.tasktype,callback:function(a){t.$set(t.formData,"tasktype",a)},expression:"formData.tasktype"}},[e("el-option",{attrs:{label:"Flink",value:"Flink"}}),e("el-option",{attrs:{label:"Spark",value:"Spark"}})],1)],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"运行方式",prop:"runtype"}},[e("el-input",{attrs:{clearable:!0,placeholder:"请输入"},model:{value:t.formData.runtype,callback:function(a){t.$set(t.formData,"runtype","string"===typeof a?a.trim():a)},expression:"formData.runtype"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"运行参数",prop:"run_param"}},[e("el-input",{attrs:{clearable:!0,placeholder:"请输入"},model:{value:t.formData.run_param,callback:function(a){t.$set(t.formData,"run_param","string"===typeof a?a.trim():a)},expression:"formData.run_param"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"jar URI",prop:"jarpath"}},[e("span",{staticStyle:{display:"flex","align-items":"center"}},[e("el-input",{staticStyle:{"margin-right":"10px"},attrs:{clearable:!0,placeholder:"请输入"},model:{value:t.formData.jarpath,callback:function(a){t.$set(t.formData,"jarpath","string"===typeof a?a.trim():a)},expression:"formData.jarpath"}}),e("el-button",{attrs:{type:"primary"},on:{click:t.uploadData}},[t._v("上传")])],1)])],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"任务描述",prop:"task_describe"}},[e("el-input",{attrs:{clearable:!0,type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入"},model:{value:t.formData.task_describe,callback:function(a){t.$set(t.formData,"task_describe","string"===typeof a?a.trim():a)},expression:"formData.task_describe"}})],1)],1)],1),e("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[e("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确定")]),e("el-button",{attrs:{type:"info"},on:{click:t.handleCancel}},[t._v("取消")])],1)],1)],1)}),i=[],s=e("8bb3"),o={name:"ChangePassword",data:function(){return{rules:{name:[{required:!0,message:"不能为空",trigger:"blur"}],tasktype:[{required:!0,message:"不能为空",trigger:"blur"}],runtype:[{required:!0,message:"不能为空",trigger:"blur"}]},dialogShow:!1,onClose:null,onSubmit:null,infoTitle:"详细信息",defaultFormData:{id:"",name:"",type:"JAR",tasktype:"Flink",runtype:"yarn-session",run_param:"",sql_text:"",stask_describe:"",jarpath:""},formData:null}},created:function(){this.formData=Object.assign({},this.defaultFormData)},methods:{openDialog:function(t){var a=t.formData,e=void 0===a?{}:a,r=t.infoTitle,l=void 0===r?"":r,n=t.onSubmit,i=void 0===n?null:n,s=t.onClose,o=void 0===s?null:s;this.onSubmit=i,this.onClose=o,this.infoTitle=l,this.formData=Object.assign(e,this.defaultFormData),this.dialogShow=!0},uploadData:function(){var t=this,a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("accept","application/*, image/x-png, image/gif, image/jpeg, image/bmp"),a.style.display="none",a.addEventListener("change",(function(e){var r=new FormData;r.append("file",a.files[0]),r.append("filePath",a.files[0].name),Object(s["e"])(r).then((function(e){t.formData.jarpath=a.files[0].name}))})),a.click()},handleSubmit:function(){var t=this;this.$refs["infoDialogForm"].validate((function(a){var e;return a?(null===(e=t.onSubmit)||void 0===e||e.call(t,t.formData),t.dialogShow=!1,!0):(t.$message.error("填写异常，请仔细检查"),!1)}))},handleCancel:function(){this.dialogShow=!1},close:function(){var t;null===(t=this.onClose)||void 0===t||t.call(this,this.formData)}}},c=o,u=(e("ea9c"),e("2877")),p=Object(u["a"])(c,n,i,!1,null,"49f6e606",null),m=p.exports,f={nmae:"SQLlistManageDevelopment",components:{InfoDialog:m},data:function(){return{rules:{name:[{required:!0,message:"不能为空",trigger:"blur"}],tasktype:[{required:!0,message:"不能为空",trigger:"blur"}],runtype:[{required:!0,message:"不能为空",trigger:"blur"}]},sqlDataList:null,searchInput:"",jsonResult:"",sqlText:"",curData:null,dataList:[]}},mounted:function(){var t=this;this.handleSearch().then((function(){t.sqlDataList.length&&t.setCurData(t.sqlDataList[0])}))},methods:{getData:function(){var t=this,a={type:"JAR"};return this.searchInput&&(a["name"]=this.searchInput),Object(s["d"])(a).then((function(a){t.sqlDataList=a.content.data}))},setCurData:function(t){var a=this,e=function(){var e;a.curData=t,a.sqlText=(null===(e=a.curData)||void 0===e?void 0:e.sql_text)||""};this.curData&&this.curData.sql_text!==this.sqlText?this.$confirm("该操作将覆盖当前未保存修改，是否继续","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(t){return e()})):e()},handleSearch:function(){return this.getData()},uploadData:function(){var t=this,a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("accept","application/*, image/x-png, image/gif, image/jpeg, image/bmp"),a.style.display="none",a.addEventListener("change",(function(e){var r=new FormData;r.append("file",a.files[0]),r.append("filePath",a.files[0].name),Object(s["e"])(r).then((function(e){t.curData.jarpath=a.files[0].name}))})),a.click()},updateData:function(t){var a=this;Object(s["b"])(t).then((function(){a.$message.success("更新成功"),a.getData()}))},handleUpdate:function(t){this.$refs["InfoDialog"].openDialog({formData:t,infoTitle:"更新",onSubmit:this.updateData})},handleAdd:function(){var t=this;this.$refs["InfoDialog"].openDialog({infoTitle:"新增",onSubmit:function(a){Object(s["a"])(a).then((function(){t.$message.success("更新成功"),t.getData()}))}})},executeData:function(t){var a=this;t=Object.assign({},t,{sql_text:this.sqlText}),Object(s["c"])(t).then((function(t){a.$message.success("运行成功"),a.jsonResult=JSON.stringify(t,null,2)}))}}},d=f,h=(e("9a9f"),Object(u["a"])(d,r,l,!1,null,"5de2f8a9",null));a["default"]=h.exports},"9a9f":function(t,a,e){"use strict";e("166d")},"9dc6":function(t,a,e){},ea9c:function(t,a,e){"use strict";e("9dc6")}}]);