/* Copyright (C)
* 
* This program is free software; you can redistribute it and/or
* modify it under the terms of the GNU General Public License
* as published by the Free Software Foundation; either version 2
* of the License, or (at your option) any later version.
*
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU General Public License for more details.
* 
* You should have received a copy of the GNU General Public License
* along with this program; if not, write to the Free Software
* Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
* 
*/
/**
* @file rs422_6713.h
* @brief The definition of system controller 
* @author 
* @version 78.77
*/

/* Autogenerated by SkyEye script */
#ifndef __Rs422_6713_H__
#define __Rs422_6713_H__

#define FIFO_SIZE	1024
typedef struct rs422_6713_reg{
	uint32_t buffer_cache; 	//发送/接收缓存区
	uint32_t check; 	//奇偶校验寄存器
	uint32_t brsr;  	//波特率寄存器 
	uint32_t recv_format;  	//接收帧格式  2个帧头，1个帧长，2个帧尾，累加校验和
       	uint32_t recv_header; 	//接收帧头
	uint32_t recv_tail;	//接收帧尾
	uint32_t send_format;  	//发送帧格式  2个帧头，1个帧长，2个帧尾，累加校验和
       	uint32_t send_header; 	//发送帧头
	uint32_t send_tail;	//发送帧尾
	uint32_t recv_status;	//接收状态寄存器 判断是否为1
	uint32_t send_status;	//发送状态寄存器 判断是否为0	
	uint32_t mode_ctrl;	//模式控制寄存器 查询模式:0 中断模式:2 	
	uint32_t cmd; 		//启动发送:0x1 启动接收:0x2 清除接收:0x3 
}rs422_6713_reg_t;


typedef struct rs422_6713_device{
	conf_object_t* obj;
	rs422_6713_reg_t* regs;
	struct fifo{
		char send_buf[FIFO_SIZE];
		char recv_buf[FIFO_SIZE];
		uint32_t send_cnt;
		uint32_t recv_cnt;
	}fifo;
	uint16_t recv_header[2];
	uint16_t recv_tail[2];
	uint16_t send_header[2];
	uint16_t send_tail[2];
	int recv_head_cnt;
	int recv_tail_cnt;
	int send_head_cnt;
	int send_tail_cnt;

	Rs422_bus_intf *bus_iface;
	conf_object_t *bus_obj;

	conf_object_t* intf_obj;
	skyeye_uart_data_intf* uart_intf;
	struct term{
		conf_object_t* obj;
		skyeye_uart_intf* intf;
	}term;
}rs422_6713_device;

#define BUFFER_CACHE 	0x0
#define CHECK 		0x4
#define BRSR 		0x8

#define RECV_FORMAT	0x10
#define RECV_HEADER	0x14
#define RECV_TAIL	0x1c

#define SEND_FORMAT	0x20
#define SEND_HEADER	0x24
#define SEND_TAIL	0x2c

#define RECV_STATUS	0x30
#define SEND_STATUS	0x34
#define MODE_CTRL	0x38
#define CMD		0x3c
static char* regs_name[] = {
	"buffer_cache",
	"check",
	"brsr",
	"recv_format",
	"recv_header",
	"recv_tail",
	"send_format",
	"send_header",
	"send_tail",
	"recv_status",
	"send_status",
	"mode_ctrl",
	"cmd",
	NULL
};
#define OK      0
#define Error  -1
#endif
