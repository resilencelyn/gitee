## DDBOT最近更新日志

- 2022-02-14 v1.0.4
  - 现在`/admin`命令在有权限的情况下支持列出一个群内的GroupAdmin
  - 修复登陆出现的问题
  - 增加巨量推送时的限流，当一次性推送至50个群以上时，将增加推送延迟避免被封qq号
  - 现在支持手动关注b站用户，当ddbot订阅b站用户关出现注失败时，可以手动登陆b站账号关注，这个功能可能有几十秒的延迟
  - 支持设置b站关注需要的粉丝数量，当粉丝数量不足时无法订阅，这主要是用来过滤一些无用的测试订阅（仍然可以手动登陆b站关注）
  - 更新微博图片到原图
- 2022-01-27 v1.0.3
  - 支持配置不在命令行内显示qq聊天记录
  - 现在admin邀请bot加群时会自动同意，不论bot设置成什么mode
  - 更好的自适应命令名称
  - 在windows平台增加了额外退出机制保证在点击console ×的时候可以正常退出
  - 修复acfun无法订阅的问题
  - 修复b站订阅的账号异常问题
  - 更好的`twitcasting`订阅 ( by [@eric2788](https://github.com/eric2788) )
- 2021-12-24 v1.0.2
  - 新增订阅源`twitcasting` ( by [@eric2788](https://github.com/eric2788) )
  - 支持socks5代理
  - 增加miraigo `AnimatedSticker` 支持
  - 更新miraigo解决SSO frame panic问题
  - *merry Christmas*
- 2021-12-08 v1.0.1.1
  - 由于发现登陆出现问题，快速更新miraigo版本发现似乎可以解决
  - 修复douyu/huya一些情况下在订阅的时刻会立即错误推送的问题
- 2021-12-05 v1.0.1
  - 修复更新检查会失败的问题
  - 优化推送时内存的使用，现在对内存的使用大幅优化了
  - 更新miraigo消息类型
  - 更新项目整体结构，优化依赖，现在可以通过`DDBOT.Run`方法启动bot，编写插件时更加方便了
  - b站直播推送链接去掉了多余的参数
  - 修复油管一些情况不推送的问题
  - 修复在某些情况下unwatch一些不存在的订阅的时候会返回成功的问题
  - 增强一些错误信息
- 2021-11-19 v1.0.0
  - 升级到DDBOTv2版本，v1版本将不会再增加订阅源，v2版本预计将会支持更多订阅源
  - 实现数据库迁移机制，支持无缝从v1迁移到v2
  - 更新b站推送@机制，如果bot因为一些原因一段时间没有成功刷新b站，则启动之后前几次刷新时不会触发@指令（即延迟的消息不再@）。
  - b站推送缩略推送增加了动态时间
  - 更新b站缩略推送样式，现在如果可以会回复之前推送的动态
  - 增加b站 cookie过期检测，现在可以正确处理cookie提前过期了（b站自动登录目前为失效状态）
  - 支持b站账号订阅账号自身的动态和直播
  - b站动态推送增加更多检测被审核动态的方法（目前仍无法100%找回）
  - 增加了一些缓存，优化在低带宽（<=1m）环境下的表现
  - 删除`/face`命令，去除gocv，不再支持使用gocv
  - `/list`命令支持网站参数，可以通过`-s`指定要查询的网站，防止订阅网站过多
  - 增加命令前缀的配置，默认为斜杠`/`，可自定义成其他
  - 删除芝麻代理配置，不再支持芝麻代理池
  - 限制bot发言频率，避免同一时间推送过过过于频繁而被封号（私人bot的发言频率几乎不会受到影响）
  - 修复当消息带有回复时，@检查失效的问题
  - **新增支持ACFUN直播推送，微博动态推送**
  - **升级到v1.0.0之后无法再退回v1.0.0版本以下！如果您追求稳定性，可以选择暂时不升级**
- 2021-10-14 v0.1.4
  - 增加@检查，当消息以@开头，如果@对象不是当前bot，则会跳过本条消息
  - local proxy pool 会自动识别uri schema了，如果没有schema，则默认是http，因此也支持https了。
  - 增加b站登陆失败原因信息
  - 修复一些bug
  - 删除阿里云相关功能
  - 一些悄悄地升级到v2版本的准备工作
- 2021-10-10 v0.1.3.1
  - 修复开启取关配置后，在特定情况下，b站会错误取消关注的情况
  - 完善取关触发时机，触发退群时也会尝试取关了
- 2021-10-08 v0.1.3
  - 增加多次转发的省略机制，短时间推送同一条动态的多次转发时，只有第一次会显示全部内容，后续转发动态将被省略（看asoul更方便了）
  - 更新b站FeedList接口逻辑，减少在b站接口失败时会误报的情况
  - 增加b站4302类型动态
  - 增加管理员命令`/admin`，用于查看当前拥有Admin权限的人
  - 增加进群后修改bot改名的配置，现在可以自定义改名内容或者取消改名了
  - 支持配置b站关注时使用悄悄关注
  - 支持设置b站自动取消关注
  - 支持设置沉默模式，会减少一些命令的输出信息，具体范围请看命令文档
- 2021-09-20 v0.1.2
  - 修复youtube推送有时候被错误过滤掉的问题
  - 修复审核模式下同意单个好友请求时，会删除剩下的请求的问题
  - 更新b站直播刷新链接（与PC web端保持一致）
  - 增加掉线时处理方式配置，可以禁用自动重连
  - 更新ci及ut配置
- 2021-08-31 v0.1.1
  - 增加启动完成时的文案，避免让人以为卡住了
  - 支持当b站使用帐号密码登陆时，cookie可以自动过期并且刷新了
  - 支持配置b站图片是否合并
  - 修复b站转发动态原动态失效时会推送错误格式的问题
  - 修复关注b站动态时有时候会错误地显示一条关于直播的提示的问题
- 2021-08-23 v0.1.0.1
  - 更新b站登陆方案，修复b站登陆失效的问题
- 2021-08-22 v0.1.0
  - 支持设置bot运行模式，支持“公开”、“私人”、“审核”三种，私人模式下bot会拒绝群邀请和好友申请，审核模式下bot会保留申请，等待审核
  - 优化了一些性能，减少了写磁盘频率
  - 不再推送b站4308类型的动态（对应发布直播信息的推送，应该不是手动发布的），新增b站4098/4099/4101/4300类型的动态
  - 修复取消最后一个直播订阅时，无法刷新直播状态的问题
  - 修复local image pool不支持图片数量的问题
  - 修复退群时有一些key没被删除的问题
  - 修复config命令有时候没有答复的问题
- 2021-08-14 发布 v0.0.20
  - 支持关闭消息自动已读功能
  - 支持配置图床代理，默认使用`pixiv.cat`
  - 升级至miraigo最新版本
  - 修复本地时间有误差时可能无法操作bot的问题
  - 重构了日志格式，更换成更适合人类阅读的格式
  - 更新了b站图片merge的策略
  - 增加联合投稿的防刷屏机制，短时间内多人联合投稿，后续动态将被简化
  - 下播推送时去掉了链接
- 2021-08-09 发布 v0.0.19
  - 支持了优雅停机，现在关闭DDBOT时会等待排队的推送发送完毕。
  - 更新了合并图片的逻辑，现在在非9图但比较刷屏的情况也会合并图片了。
  - 增加了合并图片的缓存，之前同一动态在多个群内推送时会每个群都做一次合并图片。
  - 增加了版本管理，以及启动时检查更新的逻辑。
  - 更新了许多日志文案信息。
  - 修复了私聊消息已读没有生效的bug。
  - 去除了全体禁用的检测（因为管理员权限并不准确）。
  - 支持了b站直播预约抽奖。
  - 增强了quit命令清除数据的力度。
  - 简化了帮助信息，只留下最常见的使用场景，其他详细命令请看命令文档。
  - 增加了b站订阅直播时检测粉丝数的逻辑，如果粉丝数过少，将提示确认订阅无误（主要是用直播间ID来订阅的情况，直播间ID也可能是合法的UID）。
- 2021-08-01 发布 v0.0.18
  - 增加了管理员命令/quit，用于退出群聊，或清除未正常退出的群的数据。
  - 重构buntdb支持嵌套事务，现在被禁言时不会再尝试推送了
- 2021-07-24 发布 v0.0.17
  - 增加了b站使用账号密码登陆，可以不用再手动填cookie了（非常容易出错）
- 2021-07-17 发布 v0.0.16
  - 增加了禁用单个命令的管理员命令，对所有群组生效
- 2021-07-12 发布 v0.0.15
  - 改善了初次使用的体验（增加扫码登陆，自动生成device.json和application.yaml）

- 增加了config配置下播推送，直播间标题推送，开启@全体成员，b站动态推送过滤器。
- 增加了config命令，目前支持配置推送同时@成员（实验阶段，并不保证稳定，目前只支持直播推送）。
- 增加了私聊的grant命令，现在可以通过私聊配置qq群内的群友命令权限了。
- 更新了list命令，现在list命令会展示所有网站的所有订阅，不必再指定-s和-t了。
- 增加了私聊的list命令，现在可以通过私聊查看订阅列表了。
- 增加了虎牙直播的推送。
- 增加了私聊的enable和disable命令，现在可以通过私聊配置qq群内的命令了。
- 增加了私聊的watch和unwatch命令，现在可以通过私聊配置qq群内的订阅了（注意仍然是qq群推送）。
- 更换船新b站监控方案，预计单帐号可支持1000订阅，最大延迟30秒。
