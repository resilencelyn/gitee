<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.chongho.inf.flink.mapper.JarMapper">

    <resultMap id="baseMap" type="cn.chongho.inf.flink.model.Jar">
        <id column="id" property="id" jdbcType="INTEGER"/>
        <result column="job_key" property="jobKey" jdbcType="VARCHAR"/>
        <result column="file_name" property="fileName" jdbcType="VARCHAR"/>
        <result column="enable_flag" property="enableFlag" jdbcType="INTEGER"/>
        <result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
        <result column="create_user_id" property="createUserId" jdbcType="INTEGER"/>
        <result column="update_time" property="updateTime" jdbcType="TIMESTAMP"/>
        <result column="update_user_id" property="updateUserId" jdbcType="INTEGER"/>
    </resultMap>

    <select id="selectByPage" resultMap="baseMap">
        SELECT * FROM jar
        WHERE enable_flag = 1
        <if test="jar.fileName != null and jar.fileName != ''" >
            AND file_name like CONCAT('%',#{jar.fileName},'%')
        </if>
        <if test="startTime != null " >
            AND create_time  &gt;= #{startTime}
        </if>
        <if test="endTime != null " >
            AND create_time  &lt;=  #{endTime}
        </if>
        LIMIT #{offset},#{limit}
    </select>

    <select id="countByPage" resultType="java.lang.Integer">
        SELECT count(1) FROM jar
        WHERE enable_flag = 1
        <if test="jar.fileName != null and jar.fileName != ''" >
            AND file_name like CONCAT('%',#{jar.fileName},'%')
        </if>
        <if test="startTime != null " >
            AND create_time  &gt;= #{startTime}
        </if>
        <if test="endTime != null " >
            AND create_time  &lt;=  #{endTime}
        </if>
    </select>

</mapper>
