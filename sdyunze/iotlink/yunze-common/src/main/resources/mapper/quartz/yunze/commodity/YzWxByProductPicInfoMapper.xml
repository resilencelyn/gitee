<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yunze.common.mapper.yunze.commodity.YzWxByProductPicInfoMapper">



	<!-- 查询有效图片  -->
	<select id="findConcise" parameterType="java.util.HashMap"  resultType="java.util.HashMap">
		SELECT
			pic_url,
			is_master
		FROM
			yz_wx_by_product_pic_info
		<where>
			product_id = #{product_id}
			AND pic_status = '1'
		</where>
		ORDER BY is_master DESC,pic_order ASC
	</select>



	<insert id="saveArr" parameterType="java.util.HashMap"  >
		insert  into
			yz_wx_by_product_pic_info
		(
			product_id,
			pic_url,
			is_master,
			pic_order,
			pic_status,
			modified_time
		)value
		<foreach item="UpdimgArr" collection="UpdimgArr" index="index"  separator="," >
		(
			#{UpdimgArr.product_id},#{UpdimgArr.pic_url},#{UpdimgArr.is_master},#{UpdimgArr.pic_order},
			1,now()
		)
		</foreach>
	</insert>


	<update id="updPicStatus" parameterType="java.util.HashMap"  >
		update
			yz_wx_by_product_pic_info
		<set>
			pic_status = #{pic_status}
		</set>
		<where>
			product_id = #{product_id}
		</where>
	</update>


	<insert id="save" parameterType="java.util.HashMap"  >
		insert  into
			yz_wx_by_product_pic_info
		(
			product_id,
			pic_url,
			one_category_id,
			is_master,
			pic_order,
			pic_status,
			modified_time
		)value
		(
			#{product_id},
			#{pic_url},
			#{one_category_id},
			#{is_master},
			#{pic_order},
			1,
			now()
		)
	</insert>

	<update id="edit" parameterType="java.util.HashMap"  >
		update
			yz_wx_by_product_pic_info
		<set>
			is_master = #{is_master},
			pic_order = #{pic_order},
			pic_status = #{pic_status}
			modified_time = now()
		</set>
		<where>
			product_id = #{product_id}
		</where>
	</update>



	<!-- 查询有效图片  -->
	<select id="findList" parameterType="java.util.HashMap"  resultType="java.util.HashMap">
		SELECT
			product_id,
			pic_order,
			pic_status,
			pic_url,
			is_master
		FROM
		yz_wx_by_product_pic_info
		<where>
			product_id = #{product_id}
			<if test="pic_status!=null and pic_status!=''">
				AND pic_status = #{pic_status}
			</if>
		</where>
		ORDER BY is_master DESC,pic_order ASC
	</select>




</mapper>